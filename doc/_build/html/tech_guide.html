

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Technical Guide &mdash; uncertainties Python package v1.5.4.1 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.5.4.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="uncertainties Python package v1.5.4.1 documentation" href="index.html" />
    <link rel="prev" title="Uncertainties in NumPy arrays" href="numpy_guide.html" /> 
  </head>
  <body>

<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
<a href="index.html"><img src="_static/logo.jpg" border="0" alt="uncertainties"/></a>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="numpy_guide.html" title="Uncertainties in NumPy arrays"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">home</a>|&nbsp;</li>
        <li><a href="search.html">search</a>|&nbsp;</li>
       <li><a href="user_guide.html">documentation </a> &raquo;</li>
 
      </ul>
    </div>



      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">Technical Guide</a><ul>
<li><a class="reference internal" href="#mathematical-definition-of-numbers-with-uncertainties">Mathematical definition of numbers with uncertainties</a></li>
<li><a class="reference internal" href="#linear-error-propagation-theory">Linear error propagation theory</a></li>
<li><a class="reference internal" href="#comparison-operators">Comparison operators</a></li>
<li><a class="reference internal" href="#classes">Classes</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="numpy_guide.html"
                                  title="previous chapter">Uncertainties in NumPy arrays</a></p>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Search the documentation.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="technical-guide">
<span id="index-0"></span><h1>Technical Guide<a class="headerlink" href="#technical-guide" title="Permalink to this headline">¶</a></h1>
<div class="section" id="mathematical-definition-of-numbers-with-uncertainties">
<h2>Mathematical definition of numbers with uncertainties<a class="headerlink" href="#mathematical-definition-of-numbers-with-uncertainties" title="Permalink to this headline">¶</a></h2>
<p id="index-1">Mathematically, <strong>numbers with uncertainties</strong> are, in this package,
probability distributions.  These probabilities are reduced to two
numbers: a nominal value and an uncertainty.</p>
<p>Thus, both variables (<tt class="xref py py-class docutils literal"><span class="pre">Variable</span></tt> objects) and the result of
mathematical operations (<tt class="xref py py-class docutils literal"><span class="pre">AffineScalarFunc</span></tt> objects) contain
these two values (respectively in their <tt class="xref py py-attr docutils literal"><span class="pre">nominal_value</span></tt>
attribute and through their <tt class="xref py py-meth docutils literal"><span class="pre">std_dev()</span></tt> method).</p>
<p id="index-2">The <strong>uncertainty</strong> of a number with uncertainty is simply defined in
this package as the standard deviation of the underlying probability
distribution.</p>
<p id="index-3">The numbers with uncertainties manipulated by this package are assumed
to have a <strong>probability distribution</strong> mostly contained around their
nominal value, in an interval of about the size of their standard
deviation.  This should cover most practical cases.</p>
<p id="index-4">A good choice of <strong>nominal value</strong> for a number with uncertainty is thus
the median of its probability distribution, the location of highest
probability, or the average value.</p>
<p>Probability distributions (random variables and calculation results)
are printed as:</p>
<div class="highlight-python"><pre>nominal value +/- standard deviation</pre>
</div>
<p>but this does not imply any property on the nominal value (beyond the
fact that the nominal value is normally inside the region of high
probability density), or that the probability distribution of the
result is symmetrical (this is rarely strictly the case).</p>
</div>
<div class="section" id="linear-error-propagation-theory">
<span id="linear-method"></span><h2>Linear error propagation theory<a class="headerlink" href="#linear-error-propagation-theory" title="Permalink to this headline">¶</a></h2>
<p>Linear approximations of functions (around the nominal values) are
used for the calculation of the standard deviation of mathematical
expressions with this package.</p>
<p>The calculated standard deviations and nominal values are thus
meaningful approximations as long as the functions involved have
precise linear expansions in the region where the probability
distribution of their variables is the largest.  It is therefore
important that uncertainties be &#8220;small&#8221;.  Mathematically, this means
that the linear term of functions around the nominal values of their
variables should be much larger than the remaining higher-order terms
over the region of significant probability.</p>
<p>For instance, <tt class="docutils literal"><span class="pre">sin(0+/-0.01)</span></tt> yields a meaningful standard deviation
since it is quite linear over 0±0.01.  However, <tt class="docutils literal"><span class="pre">cos(0+/-0.01)</span></tt>,
yields an approximate standard deviation of 0 (because the cosine is
not well approximated by a line around 0), which might not be precise
enough for all applications.</p>
</div>
<div class="section" id="comparison-operators">
<span id="index-5"></span><h2>Comparison operators<a class="headerlink" href="#comparison-operators" title="Permalink to this headline">¶</a></h2>
<p>Comparison operations (&gt;, ==, etc.) on numbers with uncertainties have
a <strong>pragmatic semantics</strong>, in this package: numbers with uncertainties
can be used wherever Python numbers are used, most of the time with a
result identical to the one that would be obtained with their nominal
value only.  This allows code that runs with pure numbers to also work
with numbers with uncertainties.</p>
<p>However, since the objects defined in this module represent
probability distributions and not pure numbers, comparison operators
are interpreted in a specific way.</p>
<p>The result of a comparison operation (&#8220;==&#8221;, &#8220;&gt;&#8221;, etc.) is defined so as
to be essentially consistent with the requirement that uncertainties
be small: the value of a comparison operation is True only if the
operation yields True for all infinitesimal variations of its random
variables, except, possibly, for an infinitely small number of cases.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">ufloat</span><span class="p">((</span><span class="mf">3.14</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">==</span> <span class="n">x</span>
<span class="go">True</span>
</pre></div>
</div>
<p>because a sample from the probability distribution of <tt class="docutils literal"><span class="pre">x</span></tt> is always
equal to itself.  However:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">ufloat</span><span class="p">((</span><span class="mf">3.14</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">==</span> <span class="n">y</span>
<span class="go">False</span>
</pre></div>
</div>
<p>since <tt class="docutils literal"><span class="pre">x</span></tt> and <tt class="docutils literal"><span class="pre">y</span></tt> are independent random variables that <em>almost</em>
never give the same value.</p>
<p>Similarly,</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">ufloat</span><span class="p">((</span><span class="mf">3.14</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">ufloat</span><span class="p">((</span><span class="mf">3.00</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span>
<span class="go">True</span>
</pre></div>
</div>
<p>because <tt class="docutils literal"><span class="pre">x</span></tt> is supposed to have a probability distribution largely
contained in the 3.14±~0.01 interval, while <tt class="docutils literal"><span class="pre">y</span></tt> is supposed to be
well in the 3.00±~0.01 one: random samples of <tt class="docutils literal"><span class="pre">x</span></tt> and <tt class="docutils literal"><span class="pre">y</span></tt> will
most of the time be such that the sample from <tt class="docutils literal"><span class="pre">x</span></tt> is larger than the
sample from <tt class="docutils literal"><span class="pre">y</span></tt>.  Therefore, it is natural to consider that for all
practical purposes, <tt class="docutils literal"><span class="pre">x</span> <span class="pre">&gt;</span> <span class="pre">y</span></tt>.</p>
<p>Comparison operations are subject to the same constraints as other
operations, as required by the <a class="reference internal" href="#linear-method"><em>linear approximation</em></a> method: their result should be linear (i.e. constant,
for boolean values) over the regions of highest probability of their
variables.  Thus, it is not meaningful to compare the following two
values, whose probability distributions overlap:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">ufloat</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">ufloat</span><span class="p">((</span><span class="mf">3.0001</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">))</span>
</pre></div>
</div>
<p>In fact the function (x, y) → (x &gt; y) is not even continuous (and
linear) over the region where x and y are concentrated.  Comparing
such numbers therefore returns a boolean result whose meaning is
undefined.</p>
<p>The boolean value (<tt class="docutils literal"><span class="pre">bool(x)</span></tt>, <tt class="docutils literal"><span class="pre">if</span> <span class="pre">x…</span></tt>) of a number with
uncertainty <tt class="docutils literal"><span class="pre">x</span></tt> is the result of <tt class="docutils literal"><span class="pre">x</span> <span class="pre">!=</span> <span class="pre">0</span></tt>, as usual.</p>
</div>
<div class="section" id="classes">
<h2>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h2>
<p>The main function provided by this module is ufloat, which creates
numbers with uncertainties (Variable objects).  Variable objects can
be used as if they were regular Python numbers.  The main attributes
and methods of Variable objects are defined in the documentation of
the Variable class.</p>
<p>Mathematical expressions involving numbers with uncertainties
(Variable objects) generally return AffineScalarFunc objects, which
also print as a value with uncertainty.  Their most useful attributes
and methods are described in the documentation for AffineScalarFunc.
Note that Variable objects are also AffineScalarFunc objects: testing
whether a value carries an uncertainty handled by this module should
be done with insinstance(my_value, AffineScalarFunc).</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="numpy_guide.html" title="Uncertainties in NumPy arrays"
             >previous</a> |</li>
        <li><a href="index.html">home</a>|&nbsp;</li>
        <li><a href="search.html">search</a>|&nbsp;</li>
       <li><a href="user_guide.html">documentation </a> &raquo;</li>
 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010, Eric O. LEBIGOT (EOL).
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0b2.
    </div>
  </body>
</html>